¡Has llegado al quinto video del **Curso Avanzado de n8n**! 🚨 Este módulo se centra en la técnica más avanzada para asegurar que tus automatizaciones estén bajo control: la creación de un **Flujo de Trabajo de Errores** (*Error Workflow*) personalizado.

Aquí tienes un resumen detallado de **"n8n Curso Avanzado (5/8) - Flujos de trabajo de errores"**:

***

## 1. El Disparador de Errores (Error Trigger)

El nodo **Error Trigger** (*Disparador de Error*) es el punto de inicio de tu *Error Workflow*. Este nodo se activa **automáticamente** cada vez que cualquier *workflow* en tu instancia de n8n falla [[00:18](http://www.youtube.com/watch?v=77Ewdaby47M&t=18)].

* **Datos que proporciona:** Devuelve información vital sobre el fallo, incluyendo:
    * El **ID** del *workflow* que falló.
    * El **nodo** que causó el error.
    * La **razón** o tipo de error.
    * Un **enlace directo** a la ejecución fallida en el historial [[00:27](http://www.youtube.com/watch?v=77Ewdaby47M&t=27)].

### Creación de un Mensaje de Error Estándar

Utilizando los datos del `Error Trigger`, puedes construir un mensaje estandarizado y útil (ej. en un nodo `Edit Fields`) que contenga [[00:43](http://www.youtube.com/watch?v=77Ewdaby47M&t=43)]:

* El nombre del *workflow* que falló.
* El ID de la ejecución.
* El tipo de error.
* El enlace a la ejecución fallida.

### Priorización de Errores [[01:08](http://www.youtube.com/watch?v=77Ewdaby47M&t=68)]

Puedes usar la información del error para asignar una **puntuación de urgencia** o **prioridad**:

* **Prioridad Baja:** Errores como `500` (Error de Servidor) a menudo significan que el servicio externo está caído, y es probable que se resuelva solo, por lo que no requieren acción inmediata.
* **Prioridad Alta:** Errores como `400` (Error de Solicitud Inválida) o lógica fallida, que indican un problema con la configuración del *workflow* que no se resolverá sin intervención.

***

## 2. Ejemplo de Workflow de Errores Avanzado (Notificación al Propietario)

El objetivo de un *Error Workflow* avanzado es notificar a la **persona correcta** (el propietario del *workflow*) de inmediato, en lugar de a un equipo genérico.

Este *workflow* se construye con la siguiente lógica [[02:18](http://www.youtube.com/watch?v=77Ewdaby47M&t=138)]:

### Paso 1: Obtener Información del Workflow [[03:15](http://www.youtube.com/watch?v=77Ewdaby47M&t=195)]

1.  **Nodo n8n:** Utiliza el nodo **n8n** (con la operación **`Get Workflow`**) para obtener **metadatos** adicionales sobre el *workflow* que falló, usando el ID proporcionado por el `Error Trigger`.
2.  **Etiquetas (*Tags*):** Si has etiquetado tus *workflows* con una clave como `owner:Maxim` [[01:51](http://www.youtube.com/watch?v=77Ewdaby47M&t=111)], esta información se recupera.

### Paso 2: Extraer y Unir Datos [[03:55](http://www.youtube.com/watch?v=77Ewdaby47M&t=235)]

1.  **Nodo Edit Fields:** Se utiliza para **extraer** el nombre del propietario de la etiqueta y colocarlo en el nivel superior de los datos (ej. campo `workflowOwner: Maxim`) para que sea fácil de acceder.
2.  **Nodo Merge (Append):** Se unen los datos del `Error Trigger` (el fallo) con los datos del **Nodo n8n** (el propietario) para tener toda la información en un solo lugar [[04:32](http://www.youtube.com/watch?v=77Ewdaby47M&t=272)].

### Paso 3: Enriquecer con Información de Contacto (Lookup) [[05:19](http://www.youtube.com/watch?v=77Ewdaby47M&t=319)]

1.  **Fuente de Contacto:** Se utiliza una fuente de datos (ej. un nodo **Code** con una lista de JSON, un Google Sheet, o una base de datos) que mapea el nombre del propietario (`Maxim`) con su **información de contacto** (ej. `maxim@empresa.com`).
2.  **Nodo Merge (Combine):** Se utiliza la opción **`Combine by Fields`** para hacer la coincidencia (JOIN):
    * **Input 1:** Los datos del error.
    * **Input 2:** La lista de contactos.
    * **Clave de Coincidencia:** Se empareja el campo `name` (de la lista de contactos) con el campo `workflowOwner` (de los datos del error) [[05:50](http://www.youtube.com/watch?v=77Ewdaby47M&t=350)].
3.  **Resultado:** Los datos del error ahora están enriquecidos con el **email** del propietario.

### Paso 4: Notificación y Acción [[06:23](http://www.youtube.com/watch?v=77Ewdaby47M&t=383)]

Finalmente, el flujo utiliza la información de contacto enriquecida para tomar una acción específica:

* **Envío de Correo:** Se usa el nodo **Email** para enviar el mensaje de error estandarizado (`errorMessage`) al correo electrónico del propietario [[06:27](http://www.youtube.com/watch?v=77Ewdaby47M&t=387)].
* **Gestión Personalizada:** Se puede llevar esto al siguiente nivel: cada propietario podría tener su propio *Error Workflow* (ejecutado mediante un **Execute Workflow**) que contenga su lógica de gestión preferida (ej. un propietario recibe notificaciones por Slack y otro por Email) [[07:00](http://www.youtube.com/watch?v=77Ewdaby47M&t=420)].

***

El próximo video te introducirá a los **Modos de Ejecución** avanzados, permitiéndote controlar cómo n8n gestiona múltiples *Items* y la concurrencia [[07:44](http://www.youtube.com/watch?v=77Ewdaby47M&t=464)].
http://googleusercontent.com/youtube_content/26
